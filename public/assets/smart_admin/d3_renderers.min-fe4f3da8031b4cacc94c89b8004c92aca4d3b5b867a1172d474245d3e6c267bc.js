(function(){var e;(e=function(e){return"object"==typeof exports&&"object"==typeof module?e(require("jquery"),require("d3")):"function"==typeof define&&define.amd?define(["jquery","d3"],e):e(jQuery,d3)})(function(e,t){return e.pivotUtilities.d3_renderers={Treemap:function(n,i){var o,r,s,a,l,c,u,d,h,f,p,m,g;for(s={localeStrings:{},d3:{width:function(){return e(window).width()/1.4},height:function(){return e(window).height()/1.4}}},i=e.extend(s,i),d=e("<div>").css({width:"100%",height:"100%"}),f={name:"All",children:[]},o=function(e,t,n){var i,r,s,a,l,c;if(0===t.length)return void(e.value=n);for(null==e.children&&(e.children=[]),c=t.shift(),l=e.children,r=0,s=l.length;s>r;r++)if(i=l[r],i.name===c)return void o(i,t,n);return a={name:c},o(a,t,n),e.children.push(a)},u=n.getRowKeys(),l=0,c=u.length;c>l;l++)h=u[l],m=n.getAggregator(h,[]).value(),null!=m&&o(f,h,m);return r=t.scale.category10(),g=i.d3.width(),a=i.d3.height(),p=t.layout.treemap().size([g,a]).sticky(!0).value(function(e){return e.size}),t.select(d[0]).append("div").style("position","relative").style("width",g+"px").style("height",a+"px").datum(f).selectAll(".node").data(p.padding([15,0,0,0]).value(function(e){return e.value}).nodes).enter().append("div").attr("class","node").style("background",function(e){return null!=e.children?"lightgrey":r(e.name)}).text(function(e){return e.name}).call(function(){this.style("left",function(e){return e.x+"px"}).style("top",function(e){return e.y+"px"}).style("width",function(e){return Math.max(0,e.dx-1)+"px"}).style("height",function(e){return Math.max(0,e.dy-1)+"px"})}),d}}})}).call(this);