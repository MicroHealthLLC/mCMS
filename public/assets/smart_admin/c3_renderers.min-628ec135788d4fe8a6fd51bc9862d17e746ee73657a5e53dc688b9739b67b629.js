(function(){var e;(e=function(e){return"object"==typeof exports&&"object"==typeof module?e(require("jquery"),require("c3")):"function"==typeof define&&define.amd?define(["jquery","c3"],e):e(jQuery,c3)})(function(e,t){var n;return n=function(n){return null==n&&(n={}),function(i,o){var r,s,a,l,c,u,d,h,f,p,m,g,v,T,b,E,y,C,D,I,O,R,w,_,x,k,S,K,N,A,L,F,P,B,M,$,H,j,q,z,W,U,V,G,X,Y,J,Q,Z,ee,te,ne;if(v={localeStrings:{vs:"vs",by:"by"},c3:{}},o=e.extend(!0,v,o),null==(a=o.c3).size&&(a.size={}),null==(l=o.c3.size).width&&(l.width=window.innerWidth/1.4),null==(c=o.c3.size).height&&(c.height=window.innerHeight/1.4-50),null==n.type&&(n.type="line"),U=i.getRowKeys(),0===U.length&&U.push([]),p=i.getColKeys(),0===p.length&&p.push([]),C=function(){var e,t,n;for(n=[],e=0,t=p.length;t>e;e++)E=p[e],n.push(E.join("-"));return n}(),j=0,T=i.aggregatorName,i.valAttrs.length&&(T+="("+i.valAttrs.join(", ")+")"),"scatter"===n.type)for(G={x:{},y:{},t:{}},s=i.rowAttrs.concat(i.colAttrs),Q=null!=(F=s[0])?F:"",y=null!=(P=s[1])?P:"",b=s.slice(2).join("-"),J=Q,""!==y&&(J+=" "+o.localeStrings.vs+" "+y),""!==b&&(J+=" "+o.localeStrings.by+" "+b),D=0,w=U.length;w>D;D++)for(W=U[D],I=0,_=p.length;_>I;I++)f=p[I],r=i.getAggregator(W,f),null!=r.value()&&(ee=W.concat(f),X=ee.slice(2).join("-"),""===X&&(X="series"),null==(u=G.x)[X]&&(u[X]=[]),null==(d=G.y)[X]&&(d[X]=[]),null==(h=G.t)[X]&&(h[X]=[]),G.y[X].push(null!=(B=ee[0])?B:0),G.x[X].push(null!=(M=ee[1])?M:0),G.t[X].push(r.format(r.value())));else{for(N=0,O=0,x=C.length;x>O;O++)te=C[O],N+=te.length;for(N>50&&(j=45),m=[],R=0,k=U.length;k>R;R++){for(W=U[R],z=W.join("-"),q=[""===z?i.aggregatorName:z],K=0,S=p.length;S>K;K++)f=p[K],Z=parseFloat(i.getAggregator(W,f).value()),isFinite(Z)?1>Z?q.push(Z.toPrecision(3)):q.push(Z.toFixed(3)):q.push(null);m.push(q)}Q=i.aggregatorName+(i.valAttrs.length?"("+i.valAttrs.join(", ")+")":""),y=i.colAttrs.join("-"),J=T,""!==y&&(J+=" "+o.localeStrings.vs+" "+y),b=i.rowAttrs.join("-"),""!==b&&(J+=" "+o.localeStrings.by+" "+b)}if(Y=e("<p>",{style:"text-align: center; font-weight: bold"}),Y.text(J),L={axis:{y:{label:Q},x:{label:y,tick:{rotate:j,multiline:!1}}},data:{type:n.type},tooltip:{grouped:!1},color:{pattern:["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac"]}},e.extend(!0,L,o.c3),"scatter"===n.type){ne={},A=0,g=[];for(V in G.x)A+=1,ne[V]=V+"_x",g.push([V+"_x"].concat(G.x[V])),g.push([V].concat(G.y[V]));L.data.xs=ne,L.data.columns=g,L.axis.x.tick={fit:!1},1===A&&(L.legend={show:!1}),L.tooltip.format={title:function(){return T},name:function(){return""},value:function(e,t,n,i){return G.t[n][i]}}}else L.axis.x.type="category",L.axis.x.categories=C,L.data.columns=m;return null!=n.stacked&&(L.data.groups=[function(){var e,t,n;for(n=[],t=0,e=U.length;e>t;t++)te=U[t],n.push(te.join("-"));return n}()]),$=e("<div>",{style:"display:none;"}).appendTo(e("body")),H=e("<div>").appendTo($),L.bindto=H[0],t.generate(L),H.detach(),$.remove(),e("<div>").append(Y,H)}},e.pivotUtilities.c3_renderers={"Line Chart":n(),"Bar Chart":n({type:"bar"}),"Stacked Bar Chart":n({type:"bar",stacked:!0}),"Area Chart":n({type:"area",stacked:!0}),"Scatter Chart":n({type:"scatter"})}})}).call(this);