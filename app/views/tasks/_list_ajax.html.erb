<table class="table table-bordered table-responsive" id="tasks_table">
  <thead>
  <tr>
    <% if User.current.can?(:manage_roles) %>
        <th><%= t('label_employee') %></th>
    <% end %>
    <th><%= t('title') %></th>
    <th><%= t('case') %></th>
    <th><%= t('task_type') %></th>
    <th><%= t('status') %></th>
    <th><%= t('priority') %></th>
    <th><%= t('date_start') %></th>
    <th><%= t('date_end') %></th>
  </tr>
  </thead>

  <tbody>
  </tbody>
</table>
<script>
  $(document).ready(function(){
    var table = $('#tasks_table').DataTable({
      "ajax": "<%= tasks_path(format: :json) %>",
      processing: true,
      serverSide: true,
      responsive: true,
      display: [[0, 'asc']],
      "bDestroy": true,
      "columns": [
        <% if User.current.can?(:manage_roles) %>
        { "searchable": true, "orderable": true },
        <% end %>
        { "searchable": true, "orderable": true },
        { "searchable": true, "orderable": true },
        { "searchable": true, "orderable": true },
        { "searchable": true, "orderable": true },
        { "searchable": true, "orderable": true },
        { "searchable": true, "orderable": true },
        { "searchable": true, "orderable": true }
      ],
      "sDom": "<'dt-toolbar'" +
      "<'col-sm-5 col-xs-8'f>" + //search box
      "<'col-sm-2 col-sm-offset-4 col-xs-2 'C>"+// drop down size
      "<'col-sm-1 col-xs-2 'l>>"+// drop down size
      "t"+ // the table
      "<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-xs-12 col-sm-6'p>>",
      "iDisplayLength": 10
    })
  } );
</script>
