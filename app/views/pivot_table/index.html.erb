<h2>Pivot Table</h2>

<%= render partial: 'action_menu' %>

<br>
<div class="row" style="background-color:#f5f5f5;">
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
    <div id="output">

    </div>
  </div>
</div>

<%= javascript_include_tag 'smart_admin/c3_renderers.min' %>
<%= javascript_include_tag 'smart_admin/d3_renderers.min' %>
<%= javascript_include_tag 'smart_admin/pivot' %>
<% if params[:for_table] %>
    <script>
      $(document).ready(function(){
        $("#output").pivotUI(
            [
              <% render_pivot_information(params[:for_table]).each do |hash| %>
              {
                 <% hash.each do |k, v| %>
                   '<%= k %>': '<%= v %>',
                <% end %>
              },
              <% end %>
           ],
        {
          rows: ["user"],
              cols: ["task_type"]
        }
        );
      });
    </script>

<% end %>
